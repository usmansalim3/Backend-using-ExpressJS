{"version":3,"names":["React","useEffect","useMemo","useState","FlatList","Image","Text","TextInput","TouchableOpacity","View","Keyboard","styles","ScrollView","ic_close","require","defaultProps","style","value","showIcon","AutoCompleteComponent","props","fontFamily","inputStyle","iconStyle","labelStyle","placeholderStyle","textErrorStyle","label","placeholderTextColor","placeholder","textError","focusColor","data","onFocus","onBlur","onChangeText","_value","renderLeftIcon","renderRightIcon","renderItem","text","setText","values","setValues","isFocus","setIsFocus","onChange","onSearch","length","dataSearch","filter","e","item","toLowerCase","replace","normalize","key","indexOf","_renderRightIcon","icon","font","onFocusCustom","onBlurCustom","onSubmitEdit","_renderItem","index","dismiss","textItem","_renderItemSelected","listContainer","_item","toString","colorFocus","borderBottomColor","borderTopColor","borderLeftColor","borderRightColor","styleLable","top","color","position","container","textInput","wrapInput","input"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-shadow */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport {\n  FlatList,\n  Image,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n  Keyboard,\n  StyleProp,\n  TextStyle,\n} from 'react-native';\nimport { styles } from './styles';\nimport type { AutoCompleteProps } from './model';\nimport { ScrollView } from 'react-native-virtualized-view';\n\nconst ic_close = require('./icon/close.png');\n\nconst defaultProps = {\n  style: {},\n  value: '',\n  showIcon: true,\n};\n\nconst AutoCompleteComponent: AutoCompleteProps = (props) => {\n  const {\n    fontFamily,\n    style,\n    inputStyle,\n    iconStyle,\n    labelStyle = {},\n    placeholderStyle = {},\n    textErrorStyle,\n    label,\n    placeholderTextColor = '#000',\n    placeholder = '',\n    showIcon,\n    textError,\n    focusColor,\n    data,\n    value,\n    onFocus,\n    onBlur,\n    onChangeText = (_value: string) => {},\n    renderLeftIcon,\n    renderRightIcon,\n    renderItem,\n  } = props;\n\n  const [text, setText] = useState<string>('');\n  const [values, setValues] = useState<string[] | null>(null);\n  const [isFocus, setIsFocus] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (value) {\n      setText(value);\n    } else {\n      setText('');\n    }\n  }, [value]);\n\n  const onChange = (text: string) => {\n    setText(text);\n    onChangeText(text);\n    onSearch(text);\n  };\n\n  const onSearch = (text: string) => {\n    if (text.length > 0 && data) {\n      const dataSearch = data.filter((e) => {\n        const item = e\n          ?.toLowerCase()\n          .replace(' ', '')\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n        const key = text\n          .toLowerCase()\n          .replace(' ', '')\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n\n        return item.indexOf(key) >= 0;\n      });\n      setValues(dataSearch);\n    } else {\n      setValues([]);\n    }\n  };\n\n  const _renderRightIcon = () => {\n    if (showIcon) {\n      if (renderRightIcon) {\n        return renderRightIcon();\n      }\n      if (text.length > 0) {\n        return (\n          <TouchableOpacity onPress={() => onChange('')}>\n            <Image source={ic_close} style={[styles.icon, iconStyle]} />\n          </TouchableOpacity>\n        );\n      } else {\n        return null;\n      }\n    }\n    return null;\n  };\n\n  const font = () => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily,\n      };\n    } else {\n      return {};\n    }\n  };\n\n  const onFocusCustom = (e: any) => {\n    setIsFocus(true);\n    if (onFocus) {\n      onFocus(e);\n    }\n  };\n\n  const onBlurCustom = (e: any) => {\n    setIsFocus(false);\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const onSubmitEdit = () => {\n    if (text.length > 0) {\n      onChange(text);\n    }\n  };\n\n  const _renderItem = ({ item, index }: { item: any; index: number }) => {\n    return (\n      <TouchableOpacity\n        key={index}\n        onPress={() => {\n          onChange(item);\n          setValues(null);\n          Keyboard.dismiss();\n        }}\n      >\n        {renderItem ? (\n          renderItem(item)\n        ) : (\n          <View style={styles.item}>\n            <Text style={[styles.textItem, font()]}>{item}</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const _renderItemSelected = () => {\n    if (values && values.length > 0) {\n      return (\n        <ScrollView keyboardShouldPersistTaps=\"handled\">\n          <View style={styles.listContainer}>\n            <FlatList\n              keyboardShouldPersistTaps=\"handled\"\n              data={values}\n              renderItem={_renderItem}\n              keyExtractor={(_item, index) => index.toString()}\n            />\n          </View>\n        </ScrollView>\n      );\n    }\n    return null;\n  };\n\n  const colorFocus = useMemo(() => {\n    if (isFocus && focusColor) {\n      return {\n        borderBottomColor: focusColor,\n        borderTopColor: focusColor,\n        borderLeftColor: focusColor,\n        borderRightColor: focusColor,\n      };\n    } else {\n      return {};\n    }\n  }, [focusColor, isFocus]);\n\n  const styleLable: StyleProp<TextStyle> = useMemo(() => {\n    if (isFocus || (text.length > 0 && label)) {\n      const style: any = labelStyle;\n      return {\n        top: 5,\n        color: isFocus ? focusColor : null,\n        ...style,\n      };\n    } else {\n      const style: any = placeholderStyle;\n      return {\n        position: 'absolute',\n        ...style,\n      };\n    }\n  }, [isFocus, text.length, label, focusColor, labelStyle, placeholderStyle]);\n\n  return (\n    <>\n      <View style={[styles.container, style, colorFocus]}>\n        <View style={styles.textInput}>\n          {renderLeftIcon?.()}\n          <View style={styles.wrapInput}>\n            {label ? (\n              <Text style={[styles.label, styleLable]}>{label}</Text>\n            ) : null}\n            <TextInput\n              {...props}\n              style={[styles.input, inputStyle, font()]}\n              value={text}\n              placeholder={isFocus || !label ? placeholder : ''}\n              placeholderTextColor={placeholderTextColor}\n              onChangeText={onChange}\n              onFocus={onFocusCustom}\n              onBlur={onBlurCustom}\n              onSubmitEditing={onSubmitEdit}\n            />\n          </View>\n          {_renderRightIcon()}\n        </View>\n      </View>\n      {_renderItemSelected()}\n      {textError ? (\n        <Text style={[styles.textError, textErrorStyle]}>{textError}</Text>\n      ) : null}\n    </>\n  );\n};\n\nAutoCompleteComponent.defaultProps = defaultProps;\n\nexport default AutoCompleteComponent;\n"],"mappings":"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"}